<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Law Assistant</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fb;
            color: #333;
            line-height: 1.6;
        }

        /* Main container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Header section */
        header {
            background-color: #0a3d62;
            color: white;
            padding: 15px 25px;
            border-radius: 10px 10px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        header h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            background-color: #fff;
            color: #0a3d62;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
        }

        /* Main chat area */
        .chat-container {
            flex: 1;
            display: flex;
            overflow: hidden;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 10px 10px;
            background-color: white;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background-color: #f0f4f8;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #ddd;
        }

        .sidebar h2 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #0a3d62;
        }

        .sidebar-section {
            margin-bottom: 25px;
        }

        .topic-list {
            list-style: none;
        }

        .topic-list li {
            padding: 8px 10px;
            margin-bottom: 5px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.2s;
        }

        .topic-list li:hover {
            background-color: #e1e8f0;
        }

        .topic-list li.active {
            background-color: #d0e1f9;
            font-weight: 500;
        }

        /* Chat main content */
        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Messages area */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 18px;
            position: relative;
            line-height: 1.5;
        }

        .user-message {
            align-self: flex-end;
            background-color: #0a3d62;
            color: white;
            border-bottom-right-radius: 4px;
        }

        .assistant-message {
            align-self: flex-start;
            background-color: #f0f4f8;
            color: #333;
            border-bottom-left-radius: 4px;
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-top: 5px;
            text-align: right;
        }

        /* Input area */
        .chat-input {
            border-top: 1px solid #ddd;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            background-color: #fff;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px;
            outline: none;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .chat-input input:focus {
            border-color: #0a3d62;
        }

        .send-btn {
            background-color: #0a3d62;
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }

        .send-btn:hover {
            background-color: #0c4b76;
        }

        /* Status bar */
        .status-bar {
            padding: 8px 15px;
            background-color: #f0f4f8;
            border-top: 1px solid #ddd;
            font-size: 0.85rem;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .typing-indicator {
            display: none;
            align-items: center;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            margin: 0 2px;
            background-color: #8c8c8c;
            display: block;
            border-radius: 50%;
            opacity: 0.4;
        }

        .typing-indicator span:nth-of-type(1) {
            animation: pulse 1s infinite;
        }

        .typing-indicator span:nth-of-type(2) {
            animation: pulse 1s infinite 0.2s;
        }

        .typing-indicator span:nth-of-type(3) {
            animation: pulse 1s infinite 0.4s;
        }

        @keyframes pulse {
            0% { opacity: 0.4; }
            50% { opacity: 1; }
            100% { opacity: 0.4; }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">CL</div>
                <h1>Cyber Law Assistant</h1>
            </div>
            <div>
                <button id="saveBtn" class="save-btn">Save Conversation</button>
            </div>
        </header>

        <div class="chat-container">
            <div class="sidebar">
                <div class="sidebar-section">
                    <h2>Topics</h2>
                    <ul class="topic-list">
                        <li data-topic="hacking">Computer Hacking</li>
                        <li data-topic="phishing">Phishing</li>
                        <li data-topic="data_breach">Data Breaches</li>
                        <li data-topic="identity_theft">Identity Theft</li>
                        <li data-topic="online_harassment">Online Harassment</li>
                        <li data-topic="children_protection">Child Protection</li>
                        <li data-topic="critical_infrastructure">Critical Infrastructure</li>
                    </ul>
                </div>
                <div class="sidebar-section">
                    <h2>Help</h2>
                    <ul class="topic-list">
                        <li data-command="help">Command List</li>
                        <li data-command="clear">Clear Conversation</li>
                        <li data-command="status">Conversation Status</li>
                    </ul>
                </div>
            </div>

            <div class="chat-main">
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be inserted here by JavaScript -->
                    <div class="message assistant-message">
                        <div class="message-content">Welcome to the Cyber Law Assistant! How can I help you with cyber law questions today?</div>
                        <div class="message-time">Now</div>
                    </div>
                </div>

                <div class="status-bar">
                    <div class="typing-indicator" id="typingIndicator">
                        <span></span><span></span><span></span>
                    </div>
                    <div class="status">Connected</div>
                </div>

                <div class="chat-input">
                    <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off">
                    <button class="send-btn" id="sendBtn">âž¤</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const chatMessages = document.getElementById('chatMessages');
            const userInput = document.getElementById('userInput');
            const sendBtn = document.getElementById('sendBtn');
            const typingIndicator = document.getElementById('typingIndicator');
            const saveBtn = document.getElementById('saveBtn');
            const topicItems = document.querySelectorAll('.topic-list li');

            // API endpoint (will need to connect to your Python backend)
            const apiUrl = '/api/chat';

            // Sample conversation history for demo purposes
            let conversationHistory = [];

            // Functions
            function addMessage(content, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.className = isUser ? 'message user-message' : 'message assistant-message';
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                messageContent.textContent = content;
                
                const messageTime = document.createElement('div');
                messageTime.className = 'message-time';
                messageTime.textContent = getFormattedTime();
                
                messageDiv.appendChild(messageContent);
                messageDiv.appendChild(messageTime);
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                // Add to conversation history
                conversationHistory.push({
                    content: content,
                    isUser: isUser,
                    timestamp: new Date().toISOString()
                });
            }

            function getFormattedTime() {
                const now = new Date();
                return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            }

            function showTypingIndicator() {
                typingIndicator.style.display = 'flex';
            }

            function hideTypingIndicator() {
                typingIndicator.style.display = 'none';
            }

            async function processUserInput(userMessage) {
                addMessage(userMessage, true);
                showTypingIndicator();
                
                // In a real implementation, you would send the message to your Python backend
                // For now, we'll simulate an API call
                try {
                    // Simulate API delay for demo
                    setTimeout(() => {
                        const response = mockCyberLawAssistant(userMessage);
                        hideTypingIndicator();
                        addMessage(response, false);
                    }, 1000);
                    
                    /* This would be the actual API call in a real implementation:
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: userMessage,
                            history: conversationHistory
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    
                    const data = await response.json();
                    hideTypingIndicator();
                    addMessage(data.response, false);
                    */
                } catch (error) {
                    console.error('Error:', error);
                    hideTypingIndicator();
                    addMessage("Sorry, I encountered an error processing your request. Please try again.", false);
                }
            }

            function saveConversation() {
                // In a real implementation, this would call your Python backend to save the conversation
                // For demo purposes, we'll just alert
                alert('Conversation saved successfully!');
                
                /* This would be the actual implementation:
                fetch('/api/save-conversation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        history: conversationHistory
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Conversation saved successfully!');
                    } else {
                        alert('Failed to save conversation.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Failed to save conversation.');
                });
                */
            }

            function clearConversation() {
                // Clear the UI
                chatMessages.innerHTML = '';
                
                // Add welcome message
                addMessage("Conversation history cleared. How can I help you with cyber law questions today?", false);
                
                // Clear history
                conversationHistory = [];
            }

            function showStatus() {
                // In a real implementation, this would fetch status from your Python backend
                addMessage("Current session status:\n- Session ID: session_2025040812345_1234\n- User type: Not specified\n- Current topic: None\n- Conversation length: " + conversationHistory.length + " interactions", false);
            }

            function showHelp() {
                addMessage("Available commands:\n- 'exit' - End the conversation\n- 'save' - Save the current conversation\n- 'help' - Show this help message\n- 'clear' - Clear the conversation history\n- 'status' - Show the current conversation status", false);
            }

            function handleTopicClick(topic) {
                userInput.value = `Tell me about ${topic.replace('_', ' ')}`;
                sendBtn.click();
            }

            function handleCommandClick(command) {
                switch(command) {
                    case 'help':
                        showHelp();
                        break;
                    case 'clear':
                        clearConversation();
                        break;
                    case 'status':
                        showStatus();
                        break;
                    default:
                        break;
                }
            }

            // Mock implementation of your Python assistant for demo purposes
            function mockCyberLawAssistant(message) {
                const msg = message.toLowerCase();
                
                if (msg === 'clear') {
                    clearConversation();
                    return "Conversation history cleared.";
                }
                
                if (msg === 'status') {
                    return "Current session status:\n- Session ID: session_2025040812345_1234\n- User type: Not specified\n- Current topic: None\n- Conversation length: " + conversationHistory.length + " interactions";
                }
                
                if (msg === 'help') {
                    return "Available commands:\n- 'exit' - End the conversation\n- 'save' - Save the current conversation\n- 'help' - Show this help message\n- 'clear' - Clear the conversation history\n- 'status' - Show the current conversation status";
                }
                
                if (msg === 'save') {
                    saveConversation();
                    return "Conversation saved successfully!";
                }
                
                if (msg === 'exit') {
                    return "Thank you for using the Cyber Law Assistant. Goodbye!";
                }
                
                if (msg.includes('hacking') || msg.includes('hack')) {
                    return "Computer Hacking: Unauthorized access to computer systems.\n\nLegal framework: Section 66 of IT Act, 2000. Punishment can include up to 3 years imprisonment or fine up to 5 lakh rupees or both.\n\nYou can ask about reporting procedures, evidence collection, or prevention tips for hacking incidents.";
                }
                
                if (msg.includes('phishing')) {
                    return "Phishing: Fraudulent attempt to obtain sensitive information by disguising as a trustworthy entity.\n\nLegal framework: Section 66D of IT Act, 2000. Punishment can include up to 3 years imprisonment and fine up to 1 lakh rupees.\n\nFor individuals, you should report phishing attempts to the cyber crime portal and contact your bank if financial information was compromised.";
                }
                
                if (msg.includes('child') || msg.includes('children')) {
                    return "Child Protection in Cyberspace: Special laws and provisions for protecting minors online.\n\nSpecial provisions: POCSO Act and IT Act Section 67B provide special protection to minors. There are mandatory reporting requirements for child exploitation material to authorities.";
                }
                
                if (msg.includes('identity theft')) {
                    return "Identity Theft: The fraudulent acquisition and use of a person's private identifying information.\n\nLegal framework: Section 66C of IT Act, 2000. Punishment can include imprisonment up to 3 years and fine up to 1 lakh rupees.\n\nIndividuals should report identity theft to the cyber crime portal, place a fraud alert with credit bureaus, and notify relevant service providers.";
                }
                
                if (msg.includes('i am a police') || msg.includes('i am law enforcement')) {
                    return "I understand you're with law enforcement. How can I help you with cyber law information today? I can provide specific information about evidence collection procedures and legal frameworks for cyber crimes.";
                }
                
                if (msg.includes('i am a victim') || msg.includes('i am an individual')) {
                    return "I understand you're an individual seeking information. How can I help you with cyber law questions today? I can provide guidance on reporting procedures and steps to take if you've been affected by a cyber crime.";
                }
                
                // Default response
                return "I'm not sure which cyber law topic you're asking about. You can ask about topics like hacking, phishing, data breaches, online harassment, or identity theft. Could you provide more details?";
            }

            // Event Listeners
            userInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && userInput.value.trim() !== '') {
                    const userMessage = userInput.value.trim();
                    userInput.value = '';
                    processUserInput(userMessage);
                }
            });

            sendBtn.addEventListener('click', function() {
                if (userInput.value.trim() !== '') {
                    const userMessage = userInput.value.trim();
                    userInput.value = '';
                    processUserInput(userMessage);
                }
            });

            saveBtn.addEventListener('click', saveConversation);

            // Topic click handlers
            topicItems.forEach(item => {
                item.addEventListener('click', function() {
                    if (this.dataset.topic) {
                        handleTopicClick(this.dataset.topic);
                    } else if (this.dataset.command) {
                        handleCommandClick(this.dataset.command);
                    }
                });
            });
        });
    </script>
</body>
</html>